(this.webpackJsonp=this.webpackJsonp||[]).push([[1],{1902:function(e,t,a){"use strict";a.r(t),function(e){var r,n=a(0),o=a.n(n),i=a(16),s=a(25),c=a(110),l=a(20),u=a.n(l),p=a(62),d=a(1342),m=a(4115),f=a(1470),b=a(71),g=a(4136),h=a(4130),y=a(288),E=a(1903),v=a(3908),S=a(3909),j=a.n(S),w=a(546),C=a(629),O=a(553),A=a(552),T=a(78),x=a(4129);function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],r=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}(r="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.enterModule:void 0)&&r(e);var N="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default.signature:function(e){return e},M={appBar:{position:"relative"},flex:{flex:1},popupHeader:{display:"flex",flexDirection:"row",alignItems:"center"},splitWrapper:{padding:0},docName:{alignItems:"center",display:"flex"},button:{height:30,marginLeft:30}};function H(e){return o.a.createElement(g.a,I({direction:"up"},e))}function L(e){var t=this,a=e.intl,r=(e.apiType,e.showAtOnce),i=e.history,c=e.docId,l=Object(n.useContext)(A.c),u=l.api,p=l.isAPIProduct,g=D(Object(n.useState)(r),2),S=g[0],k=g[1],I=D(Object(n.useState)(E.EditorState.createEmpty()),2),N=I[0],M=I[1],L=D(Object(n.useState)(!1),2),P=L[0],R=L[1],G=function(){if(S||q(),S&&r){var e="/".concat(p?"api-products":"apis","/").concat(u.id,"/documents");i.push(e)}k(!S)},q=function(){(p?new C.a:new w.a).getInlineContentOfDocument(u.id,c).then((function(e){var t=Object(E.convertFromHTML)(e.text),a=E.ContentState.createFromBlockArray(t.contentBlocks,t.entityMap);M(E.EditorState.createWithContent(a))})).catch((function(e){404===e.status&&t.setState({apiNotFound:!0})}))},U=e.classes;return o.a.createElement("div",null,o.a.createElement(d.a,{onClick:G,disabled:Object(T.b)(["apim:api_create","apim:api_publish"],u)||u.isRevision},o.a.createElement(h.a,null,"description"),o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.edit.content",defaultMessage:[{type:0,value:"Edit Content"}]})),o.a.createElement(m.a,{fullScreen:!0,open:S,onClose:G,TransitionComponent:H},o.a.createElement(y.a,{square:!0,className:U.popupHeader},o.a.createElement(f.a,{color:"inherit",onClick:G,"aria-label":"Close"},o.a.createElement(h.a,null,"close")),o.a.createElement(b.a,{variant:"h4",className:U.docName},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.edit.content.of",defaultMessage:[{type:0,value:"Edit Content of"}]})," ",'"',e.docName,'"'),o.a.createElement(d.a,{className:U.button,variant:"contained",disabled:P,color:"primary",onClick:function(){var e=p?new C.a:new w.a;R(!0);var t=j()(Object(E.convertToRaw)(N.getCurrentContent()));e.addInlineContentToDocument(u.id,c,"INLINE",t).then((function(e){O.a.info("".concat(e.obj.name," ").concat(a.formatMessage({id:"Apis.Details.Documents.TextEditor.update.success.message",defaultMessage:[{type:0,value:"updated successfully."}]}))),G(),R(!1)})).catch((function(e){O.a.error("".concat(e," ").concat(a.formatMessage({id:"Apis.Details.Documents.TextEditor.update.error.message",defaultMessage:[{type:0,value:"update failed."}]}))),R(!1)}))}},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.update.content.button",defaultMessage:[{type:0,value:"Update Content"}]}),P&&o.a.createElement(x.a,{size:24})),o.a.createElement(d.a,{className:U.button,onClick:G},o.a.createElement(s.a,{id:"Apis.Details.Documents.TextEditor.cancel.button",defaultMessage:[{type:0,value:"Cancel"}]}))),o.a.createElement("div",{className:U.splitWrapper},o.a.createElement(v.Editor,{editorState:N,wrapperClassName:"draftjs-wrapper",editorClassName:"draftjs-editor",onEditorStateChange:function(e){M(e)}}))))}N(L,"useContext{{ api, isAPIProduct }}\nuseState{[open, setOpen](showAtOnce)}\nuseState{[editorState, setEditorState](EditorState.createEmpty())}\nuseState{[isUpdating, setIsUpdating](false)}"),L.propTypes={classes:u.a.shape({}).isRequired,docId:u.a.string.isRequired,apiType:u.a.oneOf([w.a.CONSTS.API,w.a.CONSTS.APIProduct]).isRequired,intl:u.a.shape({}).isRequired,showAtOnce:u.a.bool.isRequired,api:u.a.shape({id:u.a.string,apiType:u.a.oneOf([w.a.CONSTS.API,w.a.CONSTS.APIProduct])}).isRequired};var P,R,G=Object(c.c)(Object(i.withRouter)(Object(p.a)(M)(L)));t.default=G,(P="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.default:void 0)&&(P.register(M,"styles","/home/jenkins/workspace/platform-builds/carbon-apimgt/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),P.register(H,"Transition","/home/jenkins/workspace/platform-builds/carbon-apimgt/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),P.register(L,"TextEditor","/home/jenkins/workspace/platform-builds/carbon-apimgt/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx"),P.register(G,"default","/home/jenkins/workspace/platform-builds/carbon-apimgt/target/checkout/features/apimgt/org.wso2.carbon.apimgt.publisher.feature/src/main/resources/publisher/source/src/app/components/Apis/Details/Documents/TextEditor.jsx")),(R="undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal.leaveModule:void 0)&&R(e)}.call(this,a(33)(e))}}]);
//# sourceMappingURL=ListingTextEditor.69c649d0f5bf5ae3f99f.bundle.js.map